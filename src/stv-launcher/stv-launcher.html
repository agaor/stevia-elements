<link rel="import" href="../../../polymer/polymer.html">
<link rel="import" href="../../../iron-flex-layout/iron-flex-layout.html">

<!--
`stv-launcher`
-->

<dom-module id="stv-launcher">
    <template>
        <style>
            div {
                width: 150px;
                height: 150px;
                background-color: grey;
                position: absolute;
                margin-top: 20px;
                box-shadow: 3px 3px 3px rgba(0,0,0, 0.5);
                opacity: 0;
            }

            .centered {
                transform: translate(-47%, 0);
            }

            .left {
                transform: translate(-90%,0);
            }


        </style>
        <content id="icon"></content>
        <div id="dropdown" class$="{{dropdownPosition}}" hidden>
        </div>
    </template>
    <script>
        Polymer({
            is: "stv-launcher",

            properties:{
                dropdownPosition: String

            },

            ready: function(){
                var icon = Polymer.dom(this).children[0];
                icon.addEventListener("click", this._toogle.bind(this));
            },

            _toogle: function(){
                var dropdown = this.$.dropdown;
                if(dropdown.hidden){
                    dropdown.removeAttribute("hidden");
                    this._fadeIn(dropdown);
                } else {
                    dropdown.setAttribute("hidden", true);
                    dropdown.style.opacity = 0;
                }
            },

             _fadeIn: function(el) {
                 el.style.opacity = 0;

                 var last = +new Date();
                 var tick = function() {
                     el.style.opacity = +el.style.opacity + (new Date() - last) / 400;
                     last = +new Date();

                     if (+el.style.opacity < 1) {
                         (window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16);
                     }
                 };

                 tick();
             }
        })
    </script>
</dom-module>
